// Language Translations
const translations = {
  en: {
    // Navigation
    nav_home: "Home",
    nav_about: "About",
    nav_services: "Services",
    nav_portfolio: "Portfolio",
    nav_pricing: "Pricing",
    nav_contact: "Contact",
    
    // Homepage
    hero_title: "Elevating Small Business Presence",
    hero_subtitle: "Premium websites that work as hard as you do",
    cta_see_work: "See Our Work",
    cta_get_started: "Get Started",
    
    // Services Section
    services_title: "Our Services",
    services_subtitle: "Transforming your digital presence with premium solutions",
    service_1_title: "Website Development",
    service_1_desc: "Custom-built websites that perfectly represent your brand and business goals.",
    service_2_title: "Mobile Responsiveness",
    service_2_desc: "Websites that look and function flawlessly across all devices and screen sizes.",
    service_3_title: "Website Redesign",
    service_3_desc: "Transform your outdated website into a modern, effective digital presence.",
    service_4_title: "User-Friendly Design",
    service_4_desc: "Intuitive interfaces that guide visitors effortlessly to conversion.",
    service_5_title: "Domain Services",
    service_5_desc: "Secure the perfect domain name that represents your brand and business.",
    service_6_title: "Launch Support",
    service_6_desc: "Comprehensive assistance to ensure your website launches successfully.",
    explore_services: "Explore All Services",
    
    // About Section
    about_title: "About Nighttime Website Development",
    about_subtitle: "Premium web solutions crafted in Brooklyn, New York",
    about_desc_1: "Founded by Peretz Mochkin, Nighttime Website Development specializes in creating exceptional websites for small businesses that want to stand out in the digital landscape.",
    about_desc_2: "We believe that every business deserves a website that not only looks stunning but also delivers results. Our approach combines aesthetic excellence with strategic functionality.",
    learn_more: "Learn More About Us",
    
    // Portfolio Section
    portfolio_title: "Featured Work",
    portfolio_subtitle: "A glimpse of our recent projects",
    view_all: "View All Projects",
    
    // Testimonials Section
    testimonials_title: "Client Testimonials",
    testimonials_subtitle: "What our clients say about working with us",
    
    // CTA Section
    cta_title: "Ready to elevate your online presence?",
    cta_subtitle: "Let's create a website that works as hard as you do.",
    view_pricing: "View Pricing",
    
    // Footer
    footer_desc: "Premium website development for small businesses. Based in Crown Heights, Brooklyn, NY.",
    quick_links: "Quick Links",
    contact_us: "Contact Us",
    copyright: "© 2025 Nighttime Website Development. All rights reserved.",
    privacy_policy: "Privacy Policy",
    terms_of_service: "Terms of Service"
  },
  
  fr: {
    // Navigation
    nav_home: "Accueil",
    nav_about: "À Propos",
    nav_services: "Services",
    nav_portfolio: "Portfolio",
    nav_pricing: "Tarifs",
    nav_contact: "Contact",
    
    // Homepage
    hero_title: "Élever la Présence des Petites Entreprises",
    hero_subtitle: "Des sites web premium qui travaillent aussi dur que vous",
    cta_see_work: "Voir Notre Travail",
    cta_get_started: "Commencer",
    
    // Services Section
    services_title: "Nos Services",
    services_subtitle: "Transformer votre présence numérique avec des solutions premium",
    service_1_title: "Développement de Site Web",
    service_1_desc: "Des sites web sur mesure qui représentent parfaitement votre marque et vos objectifs commerciaux.",
    service_2_title: "Responsive Mobile",
    service_2_desc: "Des sites web qui s'affichent et fonctionnent parfaitement sur tous les appareils et tailles d'écran.",
    service_3_title: "Refonte de Site Web",
    service_3_desc: "Transformez votre site web obsolète en une présence numérique moderne et efficace.",
    service_4_title: "Design Convivial",
    service_4_desc: "Des interfaces intuitives qui guident les visiteurs sans effort vers la conversion.",
    service_5_title: "Services de Domaine",
    service_5_desc: "Sécurisez le nom de domaine parfait qui représente votre marque et votre entreprise.",
    service_6_title: "Support de Lancement",
    service_6_desc: "Une assistance complète pour assurer le lancement réussi de votre site web.",
    explore_services: "Explorer Tous les Services",
    
    // About Section
    about_title: "À Propos de Nighttime Website Development",
    about_subtitle: "Solutions web premium créées à Brooklyn, New York",
    about_desc_1: "Fondée par Peretz Mochkin, Nighttime Website Development se spécialise dans la création de sites web exceptionnels pour les petites entreprises qui veulent se démarquer dans le paysage numérique.",
    about_desc_2: "Nous croyons que chaque entreprise mérite un site web qui non seulement a l'air magnifique mais qui livre aussi des résultats. Notre approche combine l'excellence esthétique avec la fonctionnalité stratégique.",
    learn_more: "En Savoir Plus Sur Nous",
    
    // Portfolio Section
    portfolio_title: "Travaux en Vedette",
    portfolio_subtitle: "Un aperçu de nos projets récents",
    view_all: "Voir Tous les Projets",
    
    // Testimonials Section
    testimonials_title: "Témoignages Clients",
    testimonials_subtitle: "Ce que nos clients disent de travailler avec nous",
    
    // CTA Section
    cta_title: "Prêt à élever votre présence en ligne?",
    cta_subtitle: "Créons un site web qui travaille aussi dur que vous.",
    view_pricing: "Voir les Tarifs",
    
    // Footer
    footer_desc: "Développement de sites web premium pour petites entreprises. Basé à Crown Heights, Brooklyn, NY.",
    quick_links: "Liens Rapides",
    contact_us: "Contactez-Nous",
    copyright: "© 2025 Nighttime Website Development. Tous droits réservés.",
    privacy_policy: "Politique de Confidentialité",
    terms_of_service: "Conditions d'Utilisation"
  },
  
  he: {
    // Navigation
    nav_home: "דף הבית",
    nav_about: "אודות",
    nav_services: "שירותים",
    nav_portfolio: "תיק עבודות",
    nav_pricing: "תמחור",
    nav_contact: "צור קשר",
    
    // Homepage
    hero_title: "מעלים את הנוכחות של עסקים קטנים",
    hero_subtitle: "אתרים פרימיום שעובדים קשה כמוך",
    cta_see_work: "צפה בעבודות שלנו",
    cta_get_started: "בואו נתחיל",
    
    // Services Section
    services_title: "השירותים שלנו",
    services_subtitle: "משנים את הנוכחות הדיגיטלית שלך עם פתרונות פרימיום",
    service_1_title: "פיתוח אתרים",
    service_1_desc: "אתרים מותאמים אישית שמייצגים בצורה מושלמת את המותג והיעדים העסקיים שלך.",
    service_2_title: "תגובתיות למובייל",
    service_2_desc: "אתרים שנראים ופועלים ללא דופי בכל המכשירים וגדלי המסך.",
    service_3_title: "עיצוב מחדש של אתרים",
    service_3_desc: "הפוך את האתר המיושן שלך לנוכחות דיגיטלית מודרנית ואפקטיבית.",
    service_4_title: "עיצוב ידידותי למשתמש",
    service_4_desc: "ממשקים אינטואיטיביים שמובילים מבקרים בקלות להמרה.",
    service_5_title: "שירותי דומיין",
    service_5_desc: "אבטח את שם הדומיין המושלם שמייצג את המותג והעסק שלך.",
    service_6_title: "תמיכת השקה",
    service_6_desc: "סיוע מקיף להבטחת השקה מוצלחת של האתר שלך.",
    explore_services: "חקור את כל השירותים",
    
    // About Section
    about_title: "אודות Nighttime Website Development",
    about_subtitle: "פתרונות אינטרנט פרימיום שנוצרו בברוקלין, ניו יורק",
    about_desc_1: "נוסדה על ידי פרץ מוצ'קין, Nighttime Website Development מתמחה ביצירת אתרים יוצאי דופן לעסקים קטנים שרוצים לבלוט בנוף הדיגיטלי.",
    about_desc_2: "אנו מאמינים שכל עסק ראוי לאתר שלא רק נראה מדהים אלא גם מביא תוצאות. הגישה שלנו משלבת מצוינות אסתטית עם פונקציונליות אסטרטגית.",
    learn_more: "למד עוד עלינו",
    
    // Portfolio Section
    portfolio_title: "עבודות מובחרות",
    portfolio_subtitle: "הצצה לפרויקטים האחרונים שלנו",
    view_all: "צפה בכל הפרויקטים",
    
    // Testimonials Section
    testimonials_title: "המלצות לקוחות",
    testimonials_subtitle: "מה הלקוחות שלנו אומרים על העבודה איתנו",
    
    // CTA Section
    cta_title: "מוכן להעלות את הנוכחות המקוונת שלך?",
    cta_subtitle: "בואו ניצור אתר שעובד קשה כמוך.",
    view_pricing: "צפה בתמחור",
    
    // Footer
    footer_desc: "פיתוח אתרים פרימיום לעסקים קטנים. ממוקם בקראון הייטס, ברוקלין, ניו יורק.",
    quick_links: "קישורים מהירים",
    contact_us: "צור קשר",
    copyright: "© 2025 Nighttime Website Development. כל הזכויות שמורות.",
    privacy_policy: "מדיניות פרטיות",
    terms_of_service: "תנאי שימוש"
  }
};

// Language Switcher
class LanguageSwitcher {
  constructor() {
    this.currentLanguage = this.detectLanguage();
    this.init();
  }
  
  detectLanguage() {
    // Get language from URL path
    const path = window.location.pathname;
    if (path.includes('/fr/')) {
      return 'fr';
    } else if (path.includes('/he/')) {
      return 'he';
    } else {
      return 'en';
    }
  }
  
  init() {
    // Update language toggle display
    const languageToggle = document.querySelector('.language-toggle span');
    if (languageToggle) {
      languageToggle.textContent = this.currentLanguage.toUpperCase();
    }
    
    // Add active class to current language in dropdown
    const languageLinks = document.querySelectorAll('.language-dropdown a');
    languageLinks.forEach(link => {
      if (link.getAttribute('href').includes(`/${this.currentLanguage}/`) || 
          (this.currentLanguage === 'en' && !link.getAttribute('href').includes('/fr/') && !link.getAttribute('href').includes('/he/'))) {
        link.classList.add('active');
      } else {
        link.classList.remove('active');
      }
    });
    
    // Set document direction for Hebrew
    if (this.currentLanguage === 'he') {
      document.documentElement.setAttribute('dir', 'rtl');
      document.body.classList.add('rtl');
    } else {
      document.documentElement.setAttribute('dir', 'ltr');
      document.body.classList.remove('rtl');
    }
    
    // Translate page content
    this.translatePage();
  }
  
  translatePage() {
    const elements = document.querySelectorAll('[data-i18n]');
    elements.forEach(element => {
      const key = element.getAttribute('data-i18n');
      if (translations[this.currentLanguage] && translations[this.currentLanguage][key]) {
        element.textContent = translations[this.currentLanguage][key];
      }
    });
  }
  
  switchLanguage(lang) {
    if (lang === this.currentLanguage) return;
    
    // Get current path
    const path = window.location.pathname;
    let newPath;
    
    // Determine new path based on selected language
    if (lang === 'en') {
      newPath = path.replace(/\/(fr|he)\//, '/');
    } else {
      if (path.includes('/fr/') || path.includes('/he/')) {
        newPath = path.replace(/\/(fr|he)\//, `/${lang}/`);
      } else {
        // Current path is English (default)
        const segments = path.split('/');
        const lastSegment = segments[segments.length - 1];
        
        if (lastSegment.includes('.html')) {
          // If we're on a specific page
          segments.pop();
          newPath = `${segments.join('/')}/${lang}/pages/${lastSegment}`;
        } else {
          // If we're on the homepage or a directory
          newPath = `${path}${path.endsWith('/') ? '' : '/'}${lang}/`;
        }
      }
    }
    
    // Navigate to new path
    window.location.href = newPath;
  }
}

// Initialize language switcher when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  const languageSwitcher = new LanguageSwitcher();
  
  // Add click event listeners to language links
  const languageLinks = document.querySelectorAll('.language-dropdown a');
  languageLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const href = this.getAttribute('href');
      let lang = 'en';
      
      if (href.includes('/fr/')) {
        lang = 'fr';
      } else if (href.includes('/he/')) {
        lang = 'he';
      }
      
      languageSwitcher.switchLanguage(lang);
    });
  });
});
